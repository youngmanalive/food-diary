(this["webpackJsonpfood-diary"]=this["webpackJsonpfood-diary"]||[]).push([[0],{273:function(e,t,n){e.exports=n(492)},491:function(e,t,n){},492:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(41),c=n.n(i),o=(n(278),n(279),n(25)),l=n(505),u=n(506),s=n(513),d=n(510),m=n(75),f=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1];return[n,function(e,t){var n=t.index;r((function(e){return e===n?null:n}))}]},p=n(66),E=n(512),v=n(112),y=n.n(v),b="YY.M.DD",O="h:mm a",h="ddd, MMMM Do",j="M/DD",g=y()("12:00 pm","hh:ss a").valueOf(),w=function(e){return e.format(b)},S=function(e){return e.format(j)},k=function(e){return e.format(h)},C=n(238),D=new function e(){var t=this;Object(C.a)(this,e),this.isSupported=function(){try{window.localStorage.setItem("test","test");var e="test"===window.localStorage.getItem("test");return window.localStorage.removeItem("test"),e}catch(t){return!1}}(),this.fetch=function(){var e=t.isSupported&&window.localStorage.getItem("diary");try{return e?JSON.parse(e):[]}catch(n){return t.persist([]),[]}},this.persist=function(e){t.isSupported&&window.localStorage.setItem("diary",JSON.stringify(e))}},M=function(){var e=Object(a.useState)(!0),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)([]),c=Object(o.a)(i,2),l=c[0],u=c[1],s=Object(a.useState)(null),d=Object(o.a)(s,2),m=d[0],f=d[1],v=Object(a.useState)(!1),b=Object(o.a)(v,2),O=b[0],h=b[1];Object(a.useEffect)((function(){u(D.fetch()),r(!1)}),[]),Object(a.useEffect)((function(){n||D.persist(l)}),[l,n]);var j=Object(a.useMemo)((function(){return Object.entries(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){var n=y()(t.date),a=w(n);return e[a]||(e[a]={title:S(n),header:k(n),entries:{}}),e[a].entries[t.id]=Object(p.a)({},t,{date:n}),e}),{})}(l)).sort((function(e,t){var n=Object(o.a)(e,1)[0];return Object(o.a)(t,1)[0].localeCompare(n)}))}),[l]),g=m?l.find((function(e){return e.id===m})):null;return{diary:j,loading:n,addEntry:function(e){u((function(t){var n=Object(p.a)({},e,{id:Object(E.a)()});return t.concat([n])}))},editEntry:function(e){var t=l.findIndex((function(t){return t.id===e.id}));t>=0&&u((function(n){var a=n.slice();return a[t]=e,a}))},removeEntry:function(e){e&&u((function(t){return t.filter((function(t){return t.id!==e}))}))},setEditId:f,formEntry:g,formOpen:O,setFormOpen:h}},F=n(511),I=function(e){var t=e.entry,n=e.isActive,a=e.setActive,i=e.store;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a.Title,{active:n,index:t.id,onClick:a},r.a.createElement(m.a,{name:"dropdown"}),t.date.format(O)," \u2014 ",t.type,n&&r.a.createElement("div",{className:"entryControls"},r.a.createElement(F.a,{circular:!0,icon:"pencil",size:"mini",onClick:function(e){e.stopPropagation(),i.setEditId(t.id)}}),r.a.createElement(F.a,{circular:!0,icon:"trash",size:"mini",onClick:function(e){e.stopPropagation(),i.removeEntry(t.id)}}))),r.a.createElement(d.a.Content,{active:n},t.description.split("\n").map((function(e,t){return r.a.createElement("p",{key:t},e)}))))},x=function(e){var t=e.data,n=e.store,a=f(),i=Object(o.a)(a,2),c=i[0],l=i[1],u=t.entries,m=t.header,p=Object.values(u).sort((function(e,t){return e.date.diff(t.date)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,{as:"h3"},m),r.a.createElement(d.a.Accordion,null,p.map((function(e){return r.a.createElement(I,{key:e.id,entry:e,isActive:c===e.id,setActive:l,store:n})}))))},A=n(111),T=n(508),J=n(507),B=n(259),N=n.n(B),z=["breakfast","lunch","dinner","snack"].map((function(e){return{text:e,value:e}})),P=function(){return{type:"",description:"",date:g}},W=function(e){var t=e.store,n=Object(a.useState)(P()),i=Object(o.a)(n,2),c=i[0],l=i[1],u=function(){t.setEditId(null),l(P()),t.setFormOpen(!1)},s=function(e,t){var n=t.value,a=t.name;l((function(e){return Object(p.a)({},e,Object(A.a)({},a,n))}))};return Object(a.useEffect)((function(){if(t.formEntry){var e=t.formEntry,n=e.id,a=e.date,r=e.type,i=e.description;l({id:n,date:new Date(a),type:r,description:i}),t.setFormOpen(!0)}}),[t]),r.a.createElement(T.a,{open:t.formOpen,onClose:u,trigger:r.a.createElement(F.a,{floated:"right",circular:!0,icon:"plus",onClick:function(){return t.setFormOpen(!0)}})},r.a.createElement(T.a.Header,null,t.formEntry?"Edit":"Add"," Diary Entry"),r.a.createElement(T.a.Content,null,r.a.createElement(J.a,{onSubmit:function(){t.formEntry?t.editEntry(c):t.addEntry(c),u()}},r.a.createElement(J.a.Field,null,r.a.createElement("label",null,"Date"),r.a.createElement(N.a,{selected:c.date,onChange:function(e){s(0,{value:e,name:"date"})},showTimeSelect:!0,timeFormat:"hh:mm aa",timeIntervals:15,maxDate:Date.now(),dateFormat:"MMMM d, yyyy h:mm aa"})),r.a.createElement(J.a.Select,{label:"Type",name:"type",options:z,onChange:s,value:c.type}),r.a.createElement(J.a.TextArea,{label:"Description",name:"description",rows:10,value:c.description,onChange:s}),r.a.createElement(J.a.Button,{color:"green",type:"submit",disabled:!c.type||!c.description,content:"Submit"}))))},Y=function(){var e=f(),t=Object(o.a)(e,2),n=t[0],a=t[1],i=M();return i.loading?r.a.createElement(l.a,{active:!0}):r.a.createElement(u.a,null,r.a.createElement(W,{store:i}),r.a.createElement(s.a,{as:"h1"},"Food Diary"),r.a.createElement(d.a,{styled:!0,fluid:!0},i.diary.map((function(e){var t=Object(o.a)(e,2),c=t[0],l=t[1];return r.a.createElement(r.a.Fragment,{key:c},r.a.createElement(d.a.Title,{active:n===c,index:c,onClick:a},r.a.createElement(m.a,{name:"dropdown"}),l.title),r.a.createElement(d.a.Content,{active:n===c},r.a.createElement(x,{data:l,store:i})))}))))};n(491),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=document.getElementById("root");c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null)),H),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[273,1,2]]]);